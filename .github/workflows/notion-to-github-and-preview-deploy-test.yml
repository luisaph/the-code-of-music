name: Notion2Github and Preview Deploy Test
on:
  workflow_dispatch:
jobs:
  auto-sync-from-notion-to-github:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Notion2Github
        uses: stuti-43/notion-github
        with:
          SECRET_GITHUB: ${{secrets.TOKEN_GITHUB}}
          NOTION_SECRET: ${{secrets.TOKEN_NOTION}}

      - name: Install and Build ðŸ”§
        run: |
          yarn install
          yarn build

      - name: Deploy to Staging ðŸš€
        uses: FirebaseExtended/action-hosting-deploy@v0
        with:
          repoToken: '${{ secrets.GITHUB_TOKEN }}'
          firebaseServiceAccount: '${{ secrets.FIREBASE_SERVICE_ACCOUNT_CODEOFMUSIC_16A81 }}'
          projectId: codeofmusic-16a81
          channelId: staging
